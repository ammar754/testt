# Create an index.html using inline SVG-based data URIs for six rank logos (no external files).
from pathlib import Path, PurePosixPath
import base64, html, os, textwrap, json

ranks = [
    ("Voidling", "15k"),
    ("Phantom", "30k"),
    ("Warlord", "60k"),
    ("Overseer", "90k"),
    ("Eternal", "100k"),
    ("Titan", "130k")
]

def svg_datauri(rank_name):
    # create a neon-style SVG with rank name and small icon
    svg = f'''<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" viewBox="0 0 800 800">
  <defs>
    <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#7b2cff"/><stop offset="1" stop-color="#3ac7ff"/></linearGradient>
    <filter id="glow"><feGaussianBlur stdDeviation="8" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
  </defs>
  <rect width="100%" height="100%" rx="80" fill="#0b0b11"/>
  <g transform="translate(0,60)">
    <circle cx="400" cy="260" r="160" fill="url(#g1)" opacity="0.14"/>
    <g transform="translate(400,260)">
      <path d="M-40,-40 L40,-40 L60,20 L0,60 L-60,20 Z" fill="url(#g1)" opacity="0.9" filter="url(#glow)"/>
    </g>
  </g>
  <text x="50%" y="560" font-family="Orbitron, sans-serif" font-size="72" fill="white" text-anchor="middle" font-weight="700" style="letter-spacing:2px" filter="url(#glow)">{html.escape(rank_name)}</text>
  <text x="50%" y="640" font-family="Inter, sans-serif" font-size="36" fill="#dcd9ff" text-anchor="middle" opacity="0.9">NEBULA HC</text>
</svg>'''
    b = svg.encode('utf-8')
    return "data:image/svg+xml;base64," + base64.b64encode(b).decode('ascii')

img_map = {name: svg_datauri(name) for name, _ in ranks}

# Now build the HTML content (single file) using those data URIs
html_content = f"""<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Nebula Hardcore — Store (HD)</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root{{--bg1:#08060a;--bg2:#0f0b13;--muted:#cfcfe0;--accent1:#7b2cff;--accent2:#3ac7ff;--glass:rgba(255,255,255,0.04);}}
*{{box-sizing:border-box}}html,body{{height:100%}}body{{margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--muted);-webkit-font-smoothing:antialiased}}
.container{{max-width:1200px;margin:28px auto;padding:20px}}.header{{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:16px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.03)}}.brand{{display:flex;align-items:center;gap:12px}}.logo-badge{{width:56px;height:56px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent1),var(--accent2));color:white;font-family:Orbitron;font-weight:700;box-shadow:0 8px 30px rgba(59,30,130,0.25)}}.title{{font-family:Orbitron;font-size:20px}}.controls{{display:flex;gap:10px;align-items:center}}.search{{display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:var(--glass);border:1px solid rgba(255,255,255,0.03)}}.search input{{background:transparent;border:0;outline:none;color:var(--muted);width:200px}}
.hero{{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:18px}}.panel{{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}}.hero h1{{margin:0;font-family:Orbitron}}.tags{{display:flex;gap:8px;margin-top:12px}}.tag{{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.02);font-weight:700}}.catalog-header{{display:flex;justify-content:space-between;align-items:center;margin-top:20px;margin-bottom:12px}}.grid{{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px}}.card{{border-radius:12px;padding:14px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.03);transition:transform .25s,box-shadow .25s;display:flex;flex-direction:column;min-height:340px;position:relative}}.card:hover{{transform:translateY(-8px);box-shadow:0 18px 50px rgba(0,0,0,0.6)}}.thumb{{height:160px;border-radius:10px;overflow:hidden;display:grid;place-items:center;background:linear-gradient(135deg,rgba(123,44,255,0.12),rgba(58,199,255,0.08));margin-bottom:12px}}.thumb img{{width:100%;height:100%;object-fit:contain}}.name{{font-weight:800;margin:0 0 6px 0}}.desc{{font-size:13px;color:#bdbada;margin:0 0 8px}}.price{{font-family:Orbitron;font-weight:800;font-size:18px;margin-top:auto}}.actions{{display:flex;gap:8px;margin-top:12px}}.btn-primary{{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:700}}.btn-ghost{{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 10px;border-radius:10px;cursor:pointer}}.cart-fab{{position:fixed;right:20px;bottom:22px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;padding:14px 16px;border-radius:999px;box-shadow:0 18px 50px rgba(59,30,130,0.28);cursor:pointer;display:flex;gap:8px;align-items:center;z-index:999}}.modal{{position:fixed;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:1000}}.modal .panel{{width:880px;max-width:96%;max-height:90vh;overflow:auto}}.input, textarea, select{{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);outline:none}}.ticket-card{{background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;margin-bottom:8px}}.table{{width:100%;border-collapse:collapse}}.table th,.table td{{text-align:left;padding:8px;border-bottom:1px dashed rgba(255,255,255,0.03)}}.admin-badge{{padding:6px 10px;border-radius:8px;background:rgba(123,44,255,0.08);color:var(--accent1);font-weight:700;cursor:pointer}}@media(max-width:980px){.hero{grid-template-columns:1fr}.panel{padding:12px}.thumb{height:140px}}
</style>
</head>
<body>
<div class="container">
  <header class="header">
    <div class="brand"><div class="logo-badge">NH</div><div><div class="title">Nebula Hardcore</div><div class="small" style="color:#bdbada">play.nebulahc.my.id • Official Store</div></div></div>
    <div class="controls">
      <div class="search"><i class="fa fa-search"></i><input id="q" placeholder="Cari rank / item..." oninput="renderProducts()"></div>
      <div id="adminStatus"></div>
      <button class="btn-ghost" onclick="openLogin()">Admin</button>
      <button class="btn-primary" onclick="openCart()">Cart (<span id="cartCount">0</span>)</button>
      <button class="btn-ghost" onclick="openTicket()">Create Ticket</button>
    </div>
  </header>
  <main>
    <section class="hero">
      <div class="panel"><h1>Ranks & Exclusive Items</h1><p class="small">Pilih rank yang kamu mau, checkout lewat WhatsApp. Jika ada masalah, buat ticket — admin bisa tanggapi lewat panel.</p><div class="tags"><div class="tag">Instant</div><div class="tag">Secure</div><div class="tag">Admin Commands</div></div></div>
      <aside class="panel"><h3>Featured</h3><p class="small">Bundle suggestion: Titan + cosmetic</p><div style="display:flex;gap:8px;margin-top:12px"><button class="btn-primary" onclick="quickAdd('Titan')">Buy Titan</button><button class="btn-ghost" onclick="openTicket()">Open Ticket</button></div></aside>
    </section>
    <section class="catalog">
      <div class="catalog-header"><h2>Store Catalog</h2><div class="small">Voidling 15k • Phantom 30k • Warlord 60k • Overseer 90k • Eternal 100k • Titan 130k</div></div>
      <div id="productGrid" class="grid"></div>
    </section>
  </main>
</div>
<button class="cart-fab" onclick="openCart()" title="Cart"><i class="fa fa-shopping-cart"></i> <span id="cartFabText">Cart</span></button>
<div id="cartModal" class="modal" style="display:none"><div class="panel"><div style="display:flex;justify-content:space-between;align-items:center"><h3>Your Cart</h3><div><button class="btn-ghost" onclick="closeCart()">Close</button></div></div><div id="cartItems" style="max-height:320px;overflow:auto;margin-top:12px"></div><div style="margin-top:12px"><label class="small">Minecraft Username</label><input id="mcName" class="input" placeholder="ProGamer123"></div><div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px"><button class="btn-ghost" onclick="clearCart()">Clear</button><button class="btn-primary" onclick="checkout()">Checkout (WhatsApp)</button></div></div></div>
<div id="loginModal" class="modal" style="display:none"><div class="panel"><h3>Admin Login</h3><div style="display:grid;gap:8px;margin-top:8px"><input id="adminUser" class="input" placeholder="Username"><input id="adminPass" class="input" placeholder="Password" type="password"><div style="display:flex;justify-content:flex-end;gap:8px"><button class="btn-ghost" onclick="closeLogin()">Cancel</button><button class="btn-primary" onclick="doAdminLogin()">Login</button></div><div class="small">Default admin: <strong>admin</strong> / <strong>nebula123</strong></div></div></div></div>
<div id="adminPanel" class="modal" style="display:none"><div class="panel"><div style="display:flex;justify-content:space-between;align-items:center"><h3>Admin Panel</h3><div style="display:flex;gap:8px"><button class="ghost" onclick="logoutAdmin()">Logout</button><button class="ghost" onclick="closeAdmin()">Close</button></div></div><div style="margin-top:12px" class="two-col"><div><h4>Orders</h4><table class="table"><thead><tr><th>User</th><th>Items</th><th>Total</th><th>When</th><th>Actions</th></tr></thead><tbody id="ordersTbody"></tbody></table></div><div><h4>Tickets</h4><div id="ticketsList" style="max-height:360px;overflow:auto"></div></div></div><hr style="border:none;border-top:1px dashed rgba(255,255,255,0.03);margin:12px 0"><div style="display:grid;gap:8px"><h4>Manage Products</h4><div style="display:grid;grid-template-columns:1fr 120px 120px;gap:8px"><input id="newTitle" class="input" placeholder="Nama produk (Rank • Titan)"><input id="newPrice" class="input" placeholder="Harga"><input id="newImg" class="input" placeholder="URL gambar (opsional)"></div><div style="display:flex;gap:8px;justify-content:flex-end"><button class="btn-ghost" onclick="resetNewProduct()">Reset</button><button class="btn-primary" id="saveProductBtn" onclick="saveProduct()">Tambah / Simpan</button></div><div id="productManageList" style="max-height:180px;overflow:auto;margin-top:8px"></div><div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px"><button class="btn-ghost" onclick="exportData()">Export JSON</button><button class="btn-ghost" onclick="importData()">Import JSON</button></div></div></div></div>
<div id="ticketModal" class="modal" style="display:none"><div class="panel"><h3>Create Ticket</h3><div style="display:grid;gap:8px;margin-top:8px"><input id="tUser" class="input" placeholder="Minecraft username"><input id="tEmail" class="input" placeholder="Email (opsional)"><select id="tCat" class="input"><option value="Rank">Rank</option><option value="Payment">Pembayaran</option><option value="Other">Lainnya</option></select><textarea id="tDesc" class="input" placeholder="Deskripsikan masalah..."></textarea><label class="small">Upload bukti (opsional)</label><input id="tFile" type="file" accept="image/*"><div style="display:flex;gap:8px;justify-content:flex-end"><button class="btn-ghost" onclick="closeTicket()">Cancel</button><button class="btn-primary" onclick="submitTicket()">Submit Ticket</button></div></div></div></div>
<script>
const IMG_MAP = {"""

# add img_map entries
for k,v in img_map.items():
    html_content += json.dumps(k) + ":" + json.dumps(v) + ","

html_content += """};

let products = [
"""

# Add products with images
for i,(name,price) in enumerate(ranks, start=1):
    img_uri = img_map[name]
    # ensure quotes escaped
    title = name
    desc = f"{name} rank — {price}"
    html_content += f"  {{ id:{i}, title:{json.dumps('Rank • '+title)}, price:{int(price.replace('k','000')) if 'k' in price else int(price)}, category:'ranks', desc:{json.dumps(desc)}, img: IMG_MAP[{json.dumps(title)}] }},\n"

html_content += """
];

// load saved products if any
try{ const stored = JSON.parse(localStorage.getItem('nh_products')||'null'); if(Array.isArray(stored) && stored.length) products = stored; }catch(e){}
// state
let cart = JSON.parse(localStorage.getItem('nh_cart')||'[]');
let orders = JSON.parse(localStorage.getItem('nh_orders')||'[]');
let tickets = JSON.parse(localStorage.getItem('nh_tickets')||'[]');
let editingProductId = null;
const ADMIN_USER = 'admin'; const ADMIN_PASS = 'nebula123';
function formatRp(n){ return 'Rp' + (n||0).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,'.'); }
const productGrid = document.getElementById('productGrid');
function renderProducts(){ productGrid.innerHTML=''; const q=document.getElementById('q').value.toLowerCase(); products.filter(p=>!q||p.title.toLowerCase().includes(q)|| (p.desc||'').toLowerCase().includes(q)).forEach(p=>{ const d=document.createElement('div'); d.className='card'; d.innerHTML = `<div class="thumb">${p.img?'<img src="'+p.img+'" alt="'+p.title+'">':''}</div><div class="name">${p.title}</div><div class="desc">${p.desc||''}</div><div class="price">${formatRp(p.price)}</div><div class="actions"><button class="btn-ghost" onclick="viewDetails(${p.id})"><i class='fa fa-info-circle'></i> Detail</button><button class="btn-primary" onclick="addToCart(${p.id})"><i class='fa fa-plus'></i> Tambah</button></div>`; productGrid.appendChild(d); }); }
function saveCart(){ localStorage.setItem('nh_cart',JSON.stringify(cart)); renderCartCount(); }
function renderCartCount(){ document.getElementById('cartCount').textContent = cart.reduce((s,i)=>s+i.qty,0); document.getElementById('cartFabText').innerText = 'Cart ('+cart.reduce((s,i)=>s+i.qty,0)+')'; }
function addToCart(id){ const p=products.find(x=>x.id===id); if(!p) return; cart.push({...p,qty:1}); saveCart(); openCart(); }
function quickAdd(title){ const p=products.find(x=>x.title.toLowerCase().includes(title.toLowerCase())); if(p) addToCart(p.id); }
function openCart(){ renderCartItems(); document.getElementById('cartModal').style.display='flex'; }
function closeCart(){ document.getElementById('cartModal').style.display='none'; }
function renderCartItems(){ const el=document.getElementById('cartItems'); el.innerHTML=''; if(cart.length===0){ el.innerHTML='<div class="small">Cart kosong.</div>'; return;} cart.forEach((it,idx)=>{ const node=document.createElement('div'); node.className='ticket-card'; node.innerHTML = `<div style="display:flex;gap:12px;align-items:center"><div style="width:64px;height:64px;border-radius:8px;overflow:hidden"><img src="${it.img}"></div><div style="flex:1"><div style="font-weight:700">${it.title}</div><div class="small">${formatRp(it.price)}</div><div style="margin-top:6px"><button class="ghost" onclick="dec(${idx})">-</button><span style="margin:0 8px;font-weight:700">${it.qty}</span><button class="btn-ghost" onclick="inc(${idx})">+</button></div></div><div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end"><div style="font-weight:800">${formatRp(it.price*it.qty)}</div><button class="ghost" onclick="removeItem(${idx})">Remove</button></div></div>`; el.appendChild(node); }); }
function inc(i){ cart[i].qty++; saveCart(); renderCartItems(); }
function dec(i){ cart[i].qty = Math.max(1, cart[i].qty-1); saveCart(); renderCartItems(); }
function removeItem(i){ cart.splice(i,1); saveCart(); renderCartItems(); }
function clearCart(){ if(!confirm('Kosongkan cart?')) return; cart=[]; saveCart(); renderCartItems(); }
function checkout(){ if(cart.length===0){ alert('Cart kosong.'); return;} const mc=document.getElementById('mcName').value.trim(); if(!mc){ alert('Masukkan Minecraft username.'); return;} let total=0; let items=''; const payload=[]; cart.forEach(c=>{ items += `- ${c.title} (${formatRp(c.price)}) x${c.qty}\\n`; payload.push({title:c.title,price:c.price,qty:c.qty}); total += c.price*c.qty; }); const order={id:Date.now(),mcName:mc,items:payload,total,status:'pending',created:new Date().toISOString()}; orders.unshift(order); localStorage.setItem('nh_orders',JSON.stringify(orders)); cart=[]; saveCart(); renderCartItems(); closeCart(); const msg = `Bang saya mau beli rank Nebula Hardcore\\nUsername: ${mc}\\n\\nDaftar item:\\n${items}\\nTotal: ${formatRp(total)}\\nServer: play.nebulahc.my.id\\nTerima kasih.`; const wa='0089677559943'; window.open(`https://wa.me/${wa}?text=${encodeURIComponent(msg)}`,'_blank'); renderOrders(); alert('Order tersimpan dan WhatsApp dibuka.'); }
function openTicket(){ document.getElementById('ticketModal').style.display='flex'; }
function closeTicket(){ document.getElementById('ticketModal').style.display='none'; }
function submitTicket(){ const u=document.getElementById('tUser').value.trim(); const e=document.getElementById('tEmail').value.trim(); const c=document.getElementById('tCat').value; const d=document.getElementById('tDesc').value.trim(); const f=document.getElementById('tFile'); if(!u||!d){ alert('Isi username dan deskripsi ticket'); return;} const file=f.files && f.files[0]; if(file){ const reader=new FileReader(); reader.onload=function(ev){ saveTicket(u,e,c,d,ev.target.result); }; reader.readAsDataURL(file); } else { saveTicket(u,e,c,d,null); } }
function saveTicket(u,e,c,d,imgData){ const t={id:Date.now(),user:u,email:e,category:c,desc:d,file:imgData,status:'open',created:new Date().toISOString()}; tickets.unshift(t); localStorage.setItem('nh_tickets',JSON.stringify(tickets)); closeTicket(); alert('Ticket terkirim'); renderTickets(); }
function openLogin(){ document.getElementById('loginModal').style.display='flex'; }
function closeLogin(){ document.getElementById('loginModal').style.display='none'; }
function doAdminLogin(){ const u=document.getElementById('adminUser').value.trim(); const p=document.getElementById('adminPass').value; if(u===ADMIN_USER && p===ADMIN_PASS){ sessionStorage.setItem('nh_admin','1'); document.getElementById('loginModal').style.display='none'; openAdmin(); renderAdminBadge(); } else alert('Kredensial salah'); }
function logoutAdmin(){ sessionStorage.removeItem('nh_admin'); renderAdminBadge(); closeAdmin(); alert('Logout sukses'); }
function renderAdminBadge(){ document.getElementById('adminStatus').innerHTML = sessionStorage.getItem('nh_admin') ? '<span class=\"admin-badge\" onclick=\"openAdmin()\">Admin</span>' : ''; }
function openAdmin(){ if(!sessionStorage.getItem('nh_admin')){ openLogin(); return; } document.getElementById('adminPanel').style.display='flex'; renderOrders(); renderTickets(); renderProductManage(); }
function closeAdmin(){ document.getElementById('adminPanel').style.display='none'; }
function renderOrders(){ const tbody=document.getElementById('ordersTbody'); tbody.innerHTML=''; orders.forEach(o=>{ const tr=document.createElement('tr'); const itemsSummary=o.items.map(i=>`${i.title} x${i.qty}`).join(', '); tr.innerHTML = `<td>${o.mcName}</td><td style=\"white-space:nowrap\">${itemsSummary}</td><td>${formatRp(o.total)}</td><td style=\"white-space:nowrap\">${new Date(o.created).toLocaleString()}</td><td style=\"white-space:nowrap\"><button class=\"btn-ghost\" onclick=\"copyCommands(${o.id})\">Copy Cmds</button> <button class=\"btn-ghost\" onclick=\"markFulfilled(${o.id})\">Mark</button> <button class=\"ghost\" onclick=\"deleteOrder(${o.id})\">Delete</button></td>`; tbody.appendChild(tr); }); }
function copyCommands(id){ const o=orders.find(x=>x.id===id); if(!o) return alert('Order tidak ditemukan'); let cmds='# Commands for '+o.mcName+'\\n'; o.items.forEach(it=>{ const rank=(it.title.split('•')[1]||it.title).trim().toLowerCase().split(' ')[0]; cmds += `lp user ${o.mcName} parent set ${rank}\\n`; }); navigator.clipboard.writeText(cmds).then(()=>alert('Commands disalin')).catch(()=>prompt('Copy commands',cmds)); }
function markFulfilled(id){ const i=orders.findIndex(x=>x.id===id); if(i===-1) return; orders[i].status='fulfilled'; localStorage.setItem('nh_orders',JSON.stringify(orders)); renderOrders(); alert('Order ditandai fulfilled'); }
function deleteOrder(id){ if(!confirm('Hapus order ini?')) return; orders = orders.filter(x=>x.id!==id); localStorage.setItem('nh_orders',JSON.stringify(orders)); renderOrders(); alert('Order dihapus'); }
function renderTickets(){ const el=document.getElementById('ticketsList'); el.innerHTML=''; if(tickets.length===0){ el.innerHTML='<div class=\"small\">Belum ada tiket.</div>'; return; } tickets.forEach(t=>{ const node=document.createElement('div'); node.className='ticket-card'; node.innerHTML = `<div style=\"display:flex;justify-content:space-between;align-items:flex-start\"><div><strong>${t.user}</strong> <div class=\"small\">${new Date(t.created).toLocaleString()}</div><div class=\"small\">(${t.category}) ${t.email? '• '+t.email : ''}</div></div><div style=\"display:flex;flex-direction:column;gap:6px;align-items:flex-end\"><div class=\"small\">Status: <strong>${t.status}</strong></div><div><button class=\"btn-ghost\" onclick=\"replyTicket(${t.id})\">Reply</button> <button class=\"ghost\" onclick=\"closeTicketAdmin(${t.id})\">Close</button> <button class=\"ghost\" onclick=\"deleteTicket(${t.id})\">Delete</button></div></div></div><div style=\"margin-top:8px;white-space:pre-line\" class=\"small\">${t.desc}</div>${t.file?'<div style=\"margin-top:8px\"><img src=\"'+t.file+'\" style=\"max-width:100%;border-radius:8px\"></div>':''}`; el.appendChild(node); }); }
function replyTicket(id){ const t=tickets.find(x=>x.id===id); if(!t) return; const msg=prompt('Balas tiket (catatan admin):','Sedang diproses.'); if(msg!==null){ t.status='replied'; t.adminNote=msg; localStorage.setItem('nh_tickets',JSON.stringify(tickets)); renderTickets(); alert('Balasan disimpan'); } }
function closeTicketAdmin(id){ const t=tickets.find(x=>x.id===id); if(!t) return; t.status='closed'; localStorage.setItem('nh_tickets',JSON.stringify(tickets)); renderTickets(); alert('Ticket ditutup'); }
function deleteTicket(id){ if(!confirm('Hapus tiket?')) return; tickets = tickets.filter(x=>x.id!==id); localStorage.setItem('nh_tickets',JSON.stringify(tickets)); renderTickets(); alert('Ticket dihapus'); }
function renderProductManage(){ const el=document.getElementById('productManageList'); el.innerHTML=''; products.forEach(p=>{ const d=document.createElement('div'); d.className='ticket-card'; d.innerHTML = `<div style=\"display:flex;justify-content:space-between;align-items:center\"><div><strong>${p.title}</strong><div class=\"small\">${formatRp(p.price)}</div></div><div style=\"display:flex;gap:8px\"><button class=\"ghost\" onclick=\"editProduct(${p.id})\">Edit</button><button class=\"ghost\" onclick=\"removeProduct(${p.id})\">Hapus</button></div></div>`; el.appendChild(d); }); }
function saveProduct(){ if(!sessionStorage.getItem('nh_admin')){ alert('Login admin dulu'); return; } const title=document.getElementById('newTitle').value.trim(); const price=parseInt(document.getElementById('newPrice').value); const img=document.getElementById('newImg').value.trim() || ''; if(!title||isNaN(price)){ alert('Nama produk & harga valid diperlukan'); return; } if(editingProductId){ const idx=products.findIndex(x=>x.id===editingProductId); if(idx!==-1){ products[idx].title=title; products[idx].price=price; products[idx].img=img; products[idx].desc=title; alert('Produk diperbarui'); } editingProductId=null; document.getElementById('saveProductBtn').innerText='Tambah / Simpan'; } else { const id=Date.now(); products.unshift({id,title,price,desc:title,img,category:'ranks'}); alert('Produk ditambahkan'); } localStorage.setItem('nh_products',JSON.stringify(products)); renderProducts(); renderProductManage(); resetNewProduct(); }
def resetNewProduct_py(): pass
function editProduct(id){ if(!sessionStorage.getItem('nh_admin')){ alert('Login admin dulu'); return; } const p=products.find(x=>x.id===id); if(!p) return; editingProductId=id; document.getElementById('newTitle').value=p.title; document.getElementById('newPrice').value=p.price; document.getElementById('newImg').value=p.img; document.getElementById('saveProductBtn').innerText='Simpan Perubahan'; openAdmin(); }
function removeProduct(id){ if(!confirm('Hapus produk?')) return; products=products.filter(x=>x.id!==id); localStorage.setItem('nh_products',JSON.stringify(products)); renderProducts(); renderProductManage(); alert('Produk dihapus'); }
function resetNewProduct(){ document.getElementById('newTitle').value=''; document.getElementById('newPrice').value=''; document.getElementById('newImg').value=''; editingProductId=null; document.getElementById('saveProductBtn').innerText='Tambah / Simpan'; }
function exportData(){ const data={products,orders,tickets}; const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='nebulahc-data.json'; a.click(); URL.revokeObjectURL(url); }
function importData(){ const inp=document.createElement('input'); inp.type='file'; inp.accept='application/json'; inp.onchange=e=>{ const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=ev=>{ try{ const d=JSON.parse(ev.target.result); if(d.products) products=d.products; if(d.orders) orders=d.orders; if(d.tickets) tickets=d.tickets; localStorage.setItem('nh_products',JSON.stringify(products)); localStorage.setItem('nh_orders',JSON.stringify(orders)); localStorage.setItem('nh_tickets',JSON.stringify(tickets)); renderProducts(); renderOrders(); renderTickets(); renderProductManage(); alert('Import selesai'); }catch(err){ alert('File tidak valid'); } }; r.readAsText(f); }; inp.click(); }
function viewDetails(id){ const p=products.find(x=>x.id===id); if(!p) return; alert(`${p.title}\\n\\n${p.desc}\\nHarga: ${formatRp(p.price)}\\nServer: play.nebulahc.my.id`); }
function init(){ renderProducts(); renderCartCount(); renderAdminBadge(); renderTickets(); }
init();
</script>
</body>
</html>
"""

out_path = "/mnt/data/index.html"
with open(out_path, "w", encoding="utf-8") as f:
    f.write(html_content)

out_path

